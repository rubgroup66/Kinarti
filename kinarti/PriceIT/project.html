<!DOCTYPE html>
<html lang="en">
<head>
    <title>PriceIT</title>

    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">

    <style type="text/css">

        button {
            margin-left: 10px;
        }

        #project_name{
            background-color:lightgrey;
            font-size:60px;
        }
    </style>
    <link href="cssGeneral.css" rel="stylesheet" />

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <script src="../Scripts/ajaxCallsStub.js"></script>
    <script src="../Scripts/ajaxCalls.js"></script>
    <script>


        //function getParameterByID(id, url) {
        //    if (!url) url = window.location.href;
        //    id = id.replace(/[\[\]]/g, '\\$&');
        //    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        //        results = regex.exec(url);
        //    if (!results) return null;
        //    if (!results[2]) return '';
        //    return decodeURIComponent(results[2].replace(/\+/g, ' '));
        //}

        //$(document).ready(function () {    //get all hobbies from DB
        //    var id = getParameterByID("id")

        //    if (email && password) {

        //        uri = "../api/persons/?email=" + email + "&password=" + password;

        //        ajaxCall("GET", "../api/hobbies", "", successGetHobbies, errorGetHobbies);

        //        ajaxCall("GET", uri, "", successGetPersons, errorGetPersons);
        //    }
        //    else
        //        ajaxCall("GET", "../api/hobbies", "", successGetHobbies, errorGetHobbies);

        //    $("#pForm").submit(f2);
        //});



        $(document).ready(function () {
            ajaxCall("GET", "../api/items", "", successGetItems, error); //get all saved items from DB
            ajaxCall("GET", "../api/project", "", successGetProject, error); //get all saved items from DB
        });

        function successGetProjects(projectdata) {// this function is activated in case of a success
            //for (var i = 0; i < myItems.length; i++) {
            //    $('#addExistingItem').append('<option value="' + itemsdata[i].ID + '" >' + itemsdata[i].Name + '</option>');
            //}
            console.log(projectdata);
        }

        function error(err) { // this function is activated in case of a failure
            swal("Error: " + err);
        }
        function successGetItems(itemsdata) {// this function is activated in case of a success
            myItems = itemsdata;
            //for (var i = 0; i < myItems.length; i++) {
            //    $('#addExistingItem').append('<option value="' + itemsdata[i].ID + '" >' + itemsdata[i].Name + '</option>');
            //}
            console.log(myItems);
        }

        function ShowInfo() {
            $("#info").show();
            
        }

        function error(err) { // this function is activated in case of a failure
            swal("Error: " + err);
        }


        //לשלוף שם פרויקט
        var proj_name = localStorage.getItem("storageProj_name");
        function getName() {
            document.getElementById("project_name").innerHTML = proj_name;
        }
        //שמור שם ארגזת
        function createBox() {
            var box_name = $("#box_name").val()
            localStorage.setItem("storageBox_name", box_name);
            parent.location = 'insertItem.html';
        }     
       

    </script>
</head>
<body onload="getName()">
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">PriceIT</a>
            </div>
            <ul class="nav navbar-nav">
                <li><a href="projectsList.html">פרויקטים</a></li>
                <li><a href="showCustomers.html">לקוחות</a></li>
                <li><a href="editBoxes.html">עדכון עלויות</a></li>
            </ul>
        </div>
    </nav>
    <p id="project_name">Project name</p>

    <!-------------------------------------->
    <div>
        <div class="form-group col-sm-12">
            <button class="btn btn-info" onclick="ShowInfo()"> + הוסף ארגזת חדשה</button>
            <div class="row item">
                <div class="form-group col-sm-12" id="itemCost">

                </div>
            </div>
        </div>
    </div>












    <div class="form-group col-sm-12">
        <div id="info" hidden>
            <form id="custForm">
                <div class="form-group row item">
                    <div class="form-group col-sm-4 ">
                        <label for="box_name"><span class="red-star">★ </span>שם ארגזת</label>
                        <input type="text" class="form-control" id="box_name" placeholder="Enter the box name" required>
                    </div>
                </div>
                <br />
            </form>
        </div>

        <input type=button class="btn btn-primary btn-lg" onClick="createBox()" value='צור ארגזת'>
        <div class="row item">
            <div class="form-group col-sm-12" id="itemCost">
                <label for="cost">מחיר פרויקט כולל</label>
                <input type="number" class="form-control" id="cost" placeholder="0" disabled>
            </div>
        </div>
    </div>
</body>
</html>